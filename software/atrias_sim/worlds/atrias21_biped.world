<?xml version="1.0"?> 
<gazebo version="1.0">
	<world name="default">
		<scene>
			<ambient rgba="1.0 1.0 1.0 1"/>
			<background rgba="0 0 0 1.0">
				<sky material="Gazebo/CloudySky" />
			</background>
			<shadows enabled="false"/>
			<grid enabled="false" />
		</scene>

		<physics type="ode" update_rate="1000">
			<gravity xyz="0 0 -9.81"/>
			<ode>
				<solver type="quick" dt="0.001" iters="1000" sor="1.3"/>
				<constraints cfm="0.0000000001" erp="0.2" contact_max_correcting_vel="100.0" contact_surface_layer="0.001"/>
			</ode>
		</physics>

		<light type="directional" name="sun" cast_shadows="true">
			<origin pose="0 0 10 0 0 0"/>
			<diffuse rgba=".8 .8 .8 1"/>
			<specular rgba=".1 .1 .1 1"/>
			<attenuation range="10" constant="0.8" linear="0.01" quadratic="0.0"/>
			<direction xyz="0 .5 -.5"/>
		</light>

		<!-- Ground Plane -->
		<model name="plane_model" static="true">
			<link name="body">
				<collision name="geom">
					<geometry>
						<plane normal="0 0 1"/>
					</geometry>
					<surface>
						<friction>
							<ode mu="100000.0" mu2="100000.0"/>
						</friction>
					</surface>
				</collision>

				<visual name="visual" cast_shadows="false">
					<geometry>
						<plane normal="0 0 1"/>
					</geometry>
					<material script="Kitchen/Grass"/>
				</visual>
			</link>
		</model>


			<joint name="body_thigh_joint" type="revolute">
				<parent link="body_link"/>
				<child link="thigh_link"/>
				<origin pose="0 0 0 0 0 0"/> <!-- Defined w.r.t. the child link origin-->
				<axis xyz="0 1 0">
					<dynamics damping="0.1" friction="0.1"/>
				</axis>
			</joint>

    <model name="model_2" static="false">

      <origin pose="0.0 0.0 5.0 0.0 0.0 0.0"/>

      <link name="link_1" self_collide="false" gravity="true">
        <origin pose="0.0 0.0 0.0 0.0 0.0 0.0"/>
        <inertial mass="10.0">
          <origin pose="0.0 0.0 0.0 0.0 0.0 0.0"/>
          <inertia ixx="1.0" ixy="0.01" ixz="0.01"
                   iyy="1.0" iyz="0.01"
                   izz="1.0"/>
        </inertial>

        <visual cast_shadows="true" name="visual_box" laser_retro="100.0">
          <origin pose="0.0 0.0 0.0 0.0 0.0 0.0"/>
          <geometry>
            <box size="1.0 1.0 2.0"/>
          </geometry>
          <material script="Gazebo/Red"/>
        </visual>

        <collision name="collision_box" laser_retro="100.0">
          <origin pose="0.0 0.0 0.0 0.0 0.0 0.0"/>
          <max_contacts>250</max_contacts>
          <geometry>
            <box size="1.0 1.0 2.0"/>
          </geometry>
          <surface>
            <friction>
              <ode mu="0.5" mu2="0.2" fdir1="1.0 0 0" slip1="0" slip2="0"/>
            </friction>
            <bounce restitution_coefficient="0" threshold="1000000.0"/>
            <contact>
              <ode soft_cfm="0" soft_erp="0.2" kp="1e15" kd="1e13" max_vel="100.0" min_depth="0.0001"/>
            </contact>
          </surface>
        </collision>
      </link>
    </model>

    <joint name="joint_3" type="revolute">
      <parent link="model_2::link_1"/>
      <child  link="model_3::link_1"/>
      <origin pose="0 0 0 0 0 0"/>
      <axis xyz="1 0 0">
        <dynamics damping="0.1" friction="0.1"/>
      </axis>
    </joint>

    <model name="model_3" static="false">

      <origin pose="0.0 2.0 1.0 0.0 0.0 0.0"/>

      <link name="link_1" self_collide="false" gravity="true">
        <origin pose="0.0 0.0 0.0 0.0 0.0 0.0"/>
        <inertial mass="10.0">
          <origin pose="0.0 0.0 0.0 0.0 0.0 0.0"/>
          <inertia ixx="1.0" ixy="0.0" ixz="0.0"
                   iyy="1.0" iyz="0.0"
                   izz="1.0"/>
        </inertial>

        <visual cast_shadows="true" name="visual_cylinder" laser_retro="100.0">
          <origin pose="0.0 0.0 0.0 0.0 0.0 0.0"/>
          <geometry>
            <cylinder radius="1.0" length="2.0"/>
          </geometry>
          <material script="Gazebo/Blue"/>
        </visual>

        <collision name="collision_cylinder" laser_retro="100.0">
          <origin pose="0.0 0.0 0.0 0.0 0.0 0.0"/>
          <geometry>
            <cylinder radius="1.0" length="2.0"/>
          </geometry>
          <surface>
            <friction>
              <ode mu="0.5" mu2="0.2" fdir1="1.0 0 0" slip1="0" slip2="0"/>
            </friction>
            <bounce restitution_coefficient="0" threshold="1000000.0"/>
            <contact>
              <ode soft_cfm="0" soft_erp="0.2" kp="1e15" kd="1e13" max_vel="100.0" min_depth="0.0001"/>
            </contact>
          </surface>
        </collision>
      </link>
    </model>


<!--
	<plugin name="freeze_pose" filename="libfreeze_pose.so">
		<modelName>right_leg</modelName>
		<linkName>right_body_link</linkName>
	</plugin>

	<plugin name="atrias21_biped" filename="libatrias21_biped.so"/>
-->

	<plugin name="pause_world" filename="libpause_world.so"/>

	</world>
</gazebo>
